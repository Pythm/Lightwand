############################## LYS KJØKKEN        ##############################

kjokkenlys:
  module: lightwand
  class: Room
  log: lights_log
  OutLuxZigbee: OutdoorHueLux
  RoomLuxZwave: KITCH_FibaroSensor
  rain_sensor: sensor.netatmo_kvernabekkvegen_59_stue_regnsensor_rain # Regnsensor
  haLightModeText: input_text.lightmode #Home Assistant input_text. to display current LightMode in Lovelace
  zigbee_motion_sensors:
    - motion_sensor: KITCH_motion_Aqara
      delay: 300
      motion_constraints: "self.now_is_between('06:50:00', '23:00:00') and self.get_tracker_state('person.camilla_nordvik_2') == 'home' or self.get_state('switch.espresso') == 'on' "
  zwave_motion_sensors:
    - motion_sensor: KITCH_FibaroSensor
      delay: 300
      motion_constraints: "self.now_is_between('06:50:00', '23:00:00') and self.get_tracker_state('person.camilla_nordvik_2') == 'home' or self.get_state('switch.espresso') == 'on' "
  Lights:
    - lights:
      - light.kjokkenlys
      automations:
      - time: '00:00:00'
        light_data:
          brightness: 3
      - time: '04:00:00'
        light_data:
          brightness: 50
      - time: 'sunrise - 00:15:00'
        light_data:
          brightness: 60
      - time: 'sunrise + 00:20:00'
        light_data:
          brightness: 80
      - time: 'sunrise + 01:30:00'
        state: turn_off
        light_data:
          brightness: 80
      - time: 'sunset - 01:00:00'
        light_data:
          brightness: 50
      - time: 'sunset + 00:30:00'
        light_data:
          brightness: 30
      - time: 'sunset + 01:00:00'
        light_data:
          brightness: 10
      - time: 'sunset + 01:20:00'
        light_data:
          brightness: 8

      light_modes:
        - mode: motion
          automations:
          - time: '00:00:00'
            light_data:
              brightness: 3
          - time: '04:00:00'
            light_data:
              brightness: 140
          - time: 'sunrise - 00:15:00'
            light_data:
              brightness: 180
          - time: 'sunrise + 00:20:00'
            light_data:
              brightness: 200
          - time: 'sunrise + 00:40:00'
            light_data:
              brightness: 180
          - time: 'sunrise + 01:00:00'
            light_data:
              brightness: 160
          - time: 'sunrise + 01:20:00'
            light_data:
              brightness: 140
          - time: 'sunrise + 01:30:00'
            light_data:
              brightness: 120
          - time: 'sunset - 01:00:00'
            light_data:
              brightness: 100
          - time: 'sunset + 00:40:00'
            light_data:
              brightness: 80
          - time: 'sunset + 01:00:00'
            light_data:
              brightness: 60
          - time: 'sunset + 01:20:00'
            light_data:
              brightness: 40

        - mode: lagmat
          automations:
          - time: '00:00:00'
            light_data:
              brightness: 60
          - time: '04:00:00'
            light_data:
              brightness: 180
          - time: 'sunrise - 00:15:00'
            light_data:
              brightness: 200
          - time: 'sunrise + 00:20:00'
            light_data:
              brightness: 220
          - time: 'sunrise + 00:40:00'
            light_data:
              brightness: 200
          - time: 'sunrise + 01:00:00'
            light_data:
              brightness: 180
          - time: 'sunset - 01:00:00'
            light_data:
              brightness: 180
          - time: 'sunset + 00:40:00'
            light_data:
              brightness: 160
          - time: 'sunset + 01:00:00'

        - mode: morning
          light_data:
            brightness: 230
        - mode: guest
          state: turn_on
          offset: -20
        - mode: morelight
          state: turn_on
          offset: 20
        - mode: evenmorelight
          state: turn_on
          offset: 40
        - mode: movie
          state: turn_off

    - lights:
      - switch.lys_kjokkenvindu # Kjøkkenvindu sør
      light_modes:
        - mode: lagmat
          state: turn_on
        - mode: night
          state: turn_on
        - mode: guest
          state: turn_on
        - mode: morelight
          state: turn_on
        - mode: evenmorelight
          state: turn_on
        - mode: away
          state: lux_controlled
      lux_constraint: 1100
      lux_turn_on: 900
      lux_turn_off: 1100

    - lights:
      - switch.kitch_plantelys # Aqara smartplug Kjøkkenvindu øst (Plantelys)
      automations:
      - time: '02:00:00'
      - time: '12:00:00'
        state: turn_off
      light_modes:
        - mode: movie
          state: turn_off
        - mode: away
          automations:
          - time: '02:00:00'
          - time: '12:00:00'
            state: turn_off
        - mode: night
          automations:
          - time: '00:00:00'
          - time: '12:00:00'
            state: turn_off
      lux_constraint: 300
      lux_turn_on: 200
      lux_turn_off: 300
      conditions:
        - "self.ADapi.now_is_between('02:00:00', '12:00:00')"


############################## LYS STUE           ##############################

stuelys:
  module: lightwand
  class: Room
  log: lights_log
  OutLuxZigbee: OutdoorHueLux
  rain_sensor: sensor.netatmo_kvernabekkvegen_59_stue_regnsensor_rain # Regnsensor
  # Media players for light presets
  mediaplayers: # Sorted by rooms and priority pr room
    - mediaplayer: switch.sony_vlp_hw65
      mode: projector
    - mediaplayer: media_player.samsung_q6_series_82
      mode: tv
    - mediaplayer: media_player.samsung_s95ba_55_tv
      mode: pc
  Lights:
    - lights:
      - light.ledstrip1
      - light.ledstrip2
      - light.ledstrip_tvstue_east
      automations:
      - time: '00:00:00'
        light_data:
          brightness: 3
          transition: 3
          #color_temp: 427
          rgb_color:
            - 255
            - 160
            - 60
      - time: '04:00:00'
        light_data:
          brightness: 70
          transition: 3
          rgb_color:
            - 255
            - 160
            - 60
      - time: 'sunrise - 00:30:00'
        light_data:
          brightness: 80
          transition: 3
          rgb_color:
            - 255
            - 184
            - 84
      - time: 'sunrise + 00:30:00'
        light_data:
          brightness: 70
          transition: 3
          rgb_color:
            - 255
            - 184
            - 84
      - time: 'sunrise + 01:00:00'
        light_data:
          brightness: 50
          transition: 5
          rgb_color:
            - 255
            - 184
            - 84
      - time: 'sunset - 00:30:00'
        light_data:
          brightness: 40
          transition: 3
          rgb_color:
            - 255
            - 174
            - 86
      - time: 'sunset + 00:30:00'
        light_data:
          brightness: 30
          transition: 3
          rgb_color:
            - 255
            - 160
            - 60
      - time: 'sunset + 01:00:00'
        light_data:
          brightness: 10
          transition: 3
          rgb_color:
            - 255
            - 160
            - 60
      light_modes:
        - mode: morning
          light_data:
            brightness: 150
            transition: 3
            rgb_color:
            - 255
            - 184
            - 84
        - mode: lagmat
          state: turn_on
        - mode: mat
          state: turn_on
          offset: 30
        - mode: guest
          state: turn_on
          offset: 20
        - mode: morelight
          state: turn_on
          offset: 50
        - mode: evenmorelight
          state: turn_on
          offset: 80
        - mode: wash
          light_data:
            brightness: 230
            rgb_color:
            - 255
            - 184
            - 84
        - mode: tv
          light_data:
            brightness: 3
            transition: 3
            rgb_color:
            - 255
            - 174
            - 86
        - mode: projector
          state: turn_off
        - mode: movie
          state: turn_off

      lux_constraint: 5000
      lux_turn_on: 4500
      lux_turn_off: 5000

    - lights:
      - light.ledstrip_tvstue_north
      automations:
      - time: '00:00:00'
        light_data:
          brightness: 3
          transition: 3
          #color_temp: 427
          rgb_color:
            - 255
            - 160
            - 60
      - time: '04:00:00'
        light_data:
          brightness: 70
          transition: 3
          rgb_color:
            - 255
            - 160
            - 60
      - time: 'sunrise - 00:30:00'
        light_data:
          brightness: 80
          transition: 3
          rgb_color:
            - 255
            - 184
            - 84
      - time: 'sunrise + 00:30:00'
        light_data:
          brightness: 70
          transition: 3
          rgb_color:
            - 255
            - 184
            - 84
      - time: 'sunrise + 01:00:00'
        light_data:
          brightness: 50
          transition: 5
          rgb_color:
            - 255
            - 184
            - 84
      - time: 'sunset - 00:30:00'
        light_data:
          brightness: 40
          transition: 3
          rgb_color:
            - 255
            - 174
            - 86
      - time: 'sunset + 00:30:00'
        light_data:
          brightness: 30
          transition: 3
          rgb_color:
            - 255
            - 160
            - 60
      - time: 'sunset + 01:00:00'
        light_data:
          brightness: 10
          transition: 3
          rgb_color:
            - 255
            - 160
            - 60
      light_modes:
        - mode: morning
          light_data:
            brightness: 150
            transition: 3
            rgb_color:
            - 255
            - 184
            - 84
        - mode: lagmat
          state: turn_on
        - mode: mat
          state: turn_on
          offset: 30
        - mode: guest
          state: turn_on
          offset: 20
        - mode: morelight
          state: turn_on
          offset: 50
        - mode: evenmorelight
          state: turn_on
          offset: 80
        - mode: wash
          light_data:
            brightness: 230
            rgb_color:
            - 255
            - 184
            - 84
        - mode: tv
          light_data:
            brightness: 3
            transition: 3
            rgb_color:
            - 255
            - 174
            - 86
        - mode: projector
          state: turn_off
        - mode: movie
          light_data:
            brightness: 3
            transition: 3
            rgb_color:
            - 255
            - 174
            - 86

      lux_constraint: 5000
      lux_turn_on: 4500
      lux_turn_off: 5000


    - lights:
      - light.ledstrip_vegg
      automations:
      - time: '00:00:00'
        light_data:
          brightness: 30
          transition: 3
          rgb_color:
            - 13
            - 124
            - 255
      - time: '04:00:00'
        light_data:
          brightness: 100
          transition: 3
          rgb_color:
            - 13
            - 124
            - 255
      - time: 'sunrise - 00:30:00'
        light_data:
          brightness: 120
          transition: 3
          rgb_color:
            - 255
            - 0
            - 255
      - time: 'sunrise + 00:30:00'
        light_data:
          brightness: 90
          transition: 3
          rgb_color:
            - 255
            - 0
            - 255
      - time: 'sunrise + 01:00:00'
        light_data:
          brightness: 50
          transition: 3
          rgb_color:
            - 255
            - 0
            - 255
      - time: 'sunrise + 01:30:00'
        light_data:
          brightness: 30
          transition: 3
          rgb_color:
            - 0
            - 255
            - 190
      - time: 'sunset - 01:00:00'
        light_data:
          brightness: 60
          transition: 3
          rgb_color:
            - 13
            - 124
            - 255
      - time: 'sunset - 00:30:00'
        light_data:
          brightness: 100
          transition: 3
          rgb_color:
            - 13
            - 124
            - 255
      - time: 'sunset + 00:30:00'
        light_data:
          brightness: 50
          transition: 3
          rgb_color:
            - 13
            - 124
            - 255
      - time: 'sunset + 01:00:00'
        light_data:
          brightness: 30
          transition: 3
          rgb_color:
            - 13
            - 124
            - 255
      light_modes:
        - mode: morning
          light_data:
            brightness: 150
            transition: 3
            rgb_color:
            - 255
            - 184
            - 84
        - mode: mat
          state: turn_on
          offset: 30
        - mode: guest
          state: turn_on
          offset: 20
        - mode: morelight
          state: turn_on
          offset: 50
        - mode: evenmorelight
          state: turn_on
          offset: 80
        - mode: wash
          light_data:
            brightness: 230
            rgb_color:
            - 255
            - 184
            - 84
        - mode: tv
          light_data:
            brightness: 30
            transition: 3
            rgb_color:
            - 255
            - 174
            - 86
        - mode: pc
          light_data:
            brightness: 30
            transition: 3
            rgb_color:
            - 255
            - 174
            - 86
        - mode: projector
          state: turn_off
        - mode: movie
          light_data:
            brightness: 3
            transition: 3
            rgb_color:
            - 255
            - 174
            - 86

      lux_constraint: 5000
      lux_turn_on: 4500
      lux_turn_off: 5000

    - lights:
      - light.ledstrip_glassvegg
      automations:
      - time: '00:00:00'
        light_data:
          brightness: 30
          transition: 3
          rgb_color:
            - 13
            - 124
            - 255
      - time: '04:00:00'
        light_data:
          brightness: 100
          transition: 3
          rgb_color:
            - 13
            - 124
            - 255
      - time: 'sunrise - 00:30:00'
        light_data:
          brightness: 120
          transition: 3
          rgb_color:
            - 255
            - 0
            - 255
      - time: 'sunrise + 00:30:00'
        light_data:
          brightness: 90
          transition: 3
          rgb_color:
            - 255
            - 0
            - 255
      - time: 'sunrise + 01:00:00'
        light_data:
          brightness: 50
          transition: 3
          rgb_color:
            - 255
            - 0
            - 255
      - time: 'sunrise + 01:30:00'
        light_data:
          brightness: 30
          transition: 3
          rgb_color:
            - 0
            - 180
            - 255
      - time: 'sunset - 01:00:00'
        light_data:
          brightness: 60
          transition: 3
          rgb_color:
            - 13
            - 124
            - 255
      - time: 'sunset - 00:30:00'
        light_data:
          brightness: 100
          transition: 3
          rgb_color:
            - 13
            - 124
            - 255
      - time: 'sunset + 00:30:00'
        light_data:
          brightness: 50
          transition: 3
          rgb_color:
            - 13
            - 124
            - 255
      - time: 'sunset + 01:00:00'
        light_data:
          brightness: 30
          transition: 3
          rgb_color:
            - 13
            - 124
            - 255
      light_modes:
        - mode: morning
          light_data:
            brightness: 150
            transition: 3
            rgb_color:
            - 255
            - 184
            - 84
        - mode: mat
          state: turn_on
          offset: 30
        - mode: guest
          state: turn_on
          offset: 20
        - mode: morelight
          state: turn_on
          offset: 50
        - mode: evenmorelight
          state: turn_on
          offset: 80
        - mode: wash
          light_data:
            brightness: 230
            rgb_color:
            - 255
            - 184
            - 84
        - mode: tv
          light_data:
            brightness: 3
            transition: 3
            rgb_color:
            - 255
            - 174
            - 86
        - mode: pc
          light_data:
            brightness: 30
            transition: 3
            rgb_color:
            - 255
            - 174
            - 86
        - mode: projector
          state: turn_off
        - mode: movie
          state: turn_off

      lux_constraint: 5000
      lux_turn_on: 4500
      lux_turn_off: 5000

    - lights:
      - light.stue_spot_kontor
      automations:
      - time: '00:00:00'
        light_data:
          brightness: 20
          transition: 3
      light_modes:
        - mode: mat
          state: turn_on
          offset: 10
        - mode: guest
          state: turn_on
          offset: 10
        - mode: morelight
          state: turn_on
          offset: 50
        - mode: evenmorelight
          state: turn_on
          offset: 80
        - mode: tv
          light_data:
            brightness: 5
        - mode: projector
          state: turn_off
        - mode: movie
          state: turn_off
        - mode: pc
          light_data:
            brightness: 5
      lux_constraint: 1200
      lux_turn_on: 900
      lux_turn_off: 1200

    - lights:
      - light.tvstue_spot
      automations:
      - time: '00:00:00'
        light_data:
          brightness: 5
          transition: 3
      - time: 'sunrise + 00:30:00'
        light_data:
          brightness: 40
          transition: 3
      - time: 'sunrise + 00:45:00'
        light_data:
          brightness: 30
          transition: 3
      - time: 'sunset - 01:00:00'
        light_data:
          brightness: 20
          transition: 3
      - time: 'sunset + 00:30:00'
        light_data:
          brightness: 15
          transition: 3
      light_modes:
        - mode: mat
          state: turn_on
        - mode: guest
          state: turn_on
          offset: 20
        - mode: morelight
          state: turn_on
          offset: 50
        - mode: evenmorelight
          state: turn_on
          offset: 80
        - mode: tv
          light_data:
            brightness: 5
            transition: 3
        - mode: projector
          state: turn_off
        - mode: movie
          light_data:
            brightness: 5
            transition: 3

      lux_constraint: 4000
      lux_turn_on: 3500
      lux_turn_off: 4000

    - lights:
      - light.stue_spot_ovn
      automations:
      - time: '00:00:00'
        light_data:
          brightness: 5
          transition: 3
      - time: 'sunrise + 00:30:00'
        light_data:
          brightness: 60
          transition: 3
      - time: 'sunrise + 00:45:00'
        light_data:
          brightness: 40
          transition: 3
      - time: 'sunrise + 01:30:00'
        light_data:
          brightness: 60
          transition: 3
      - time: 'sunset - 01:00:00'
        light_data:
          brightness: 20
          transition: 3
      - time: 'sunset - 00:30:00'
        light_data:
          brightness: 30
          transition: 3
      - time: 'sunset + 00:30:00'
        light_data:
          brightness: 15
          transition: 3
      light_modes:
        - mode: morning
          light_data:
            brightness: 150
            transition: 3
        - mode: mat
          state: turn_on
          offset: 30
        - mode: guest
          state: turn_on
          offset: 40
        - mode: morelight
          state: turn_on
          offset: 50
        - mode: evenmorelight
          state: turn_on
          offset: 80
        - mode: tv
          light_data:
            brightness: 5
            transition: 3
        - mode: projector
          state: turn_off
        - mode: movie
          state: turn_off

      lux_constraint: 4000
      lux_turn_on: 3500
      lux_turn_off: 4000
      conditions:
        - "self.ADapi.get_tracker_state('person.camilla_nordvik_2') == 'home'"

    - lights:
      - light.stue_spot_northeast
      automations:
      - time: '00:00:00'
        light_data:
          brightness: 25
          transition: 3
      - time: '04:00:00'
        light_data:
          brightness: 70
          transition: 3
      - time: 'sunrise + 00:30:00'
        light_data:
          brightness: 50
          transition: 3
      - time: 'sunrise + 01:30:00'
        light_data:
          brightness: 80
          transition: 3
      - time: 'sunset - 00:30:00'
        light_data:
          brightness: 50
          transition: 3
      - time: 'sunset + 01:30:00'
        light_data:
          brightness: 30
          transition: 3
      light_modes:
        - mode: morning
          light_data:
            brightness: 150
            transition: 3
        - mode: mat
          state: turn_on
          offset: 40
        - mode: guest
          state: turn_on
          offset: 30
        - mode: morelight
          state: turn_on
          offset: 50
        - mode: evenmorelight
          state: turn_on
          offset: 80
        - mode: tv
          light_data:
            brightness: 10
            transition: 3
        - mode: projector
          state: turn_off
        - mode: movie
          state: turn_off
        - mode: pc
          state: turn_off

      lux_constraint: 6000
      lux_turn_on: 5500
      lux_turn_off: 6000
      conditions:
        - "self.ADapi.get_tracker_state('person.camilla_nordvik_2') == 'home'"

    - lights:
      - light.stue_spot_southwest
      automations:
      - time: '00:00:00'
        light_data:
          brightness: 25
          transition: 3
      - time: '04:00:00'
        light_data:
          brightness: 70
          transition: 3
      - time: 'sunrise + 00:30:00'
        light_data:
          brightness: 50
          transition: 3
      - time: 'sunrise + 01:30:00'
        light_data:
          brightness: 80
          transition: 3
      - time: 'sunset - 00:30:00'
        light_data:
          brightness: 50
          transition: 3
      - time: 'sunset + 01:30:00'
        light_data:
          brightness: 30
          transition: 3
      light_modes:
        - mode: morning
          light_data:
            brightness: 150
            transition: 3
        - mode: mat
          state: turn_on
          offset: 30
        - mode: guest
          state: turn_on
          offset: 20
        - mode: morelight
          state: turn_on
          offset: 50
        - mode: evenmorelight
          state: turn_on
          offset: 80
        - mode: tv
          light_data:
            brightness: 10
            transition: 3
        - mode: projector
          state: turn_off
        - mode: movie
          state: turn_off

      lux_constraint: 6000
      lux_turn_on: 5500
      lux_turn_off: 6000
      conditions:
        - "self.ADapi.get_tracker_state('person.camilla_nordvik_2') == 'home'"

    - lights:
      - switch.stue_stikk_1_south
      #- switch.stue_stikk_5_west
      automations:
      - time: '06:50:00'
        state: adjust
      - time: '22:00:00'
        state: turn_off
      light_modes:
        - mode: morning
          state: turn_on
        - mode: guest
          state: turn_on
        - mode: morelight
          state: turn_on
        - mode: evenmorelight
          state: turn_on
        - mode: tv
          state: turn_off
        - mode: projector
          state: turn_off
        - mode: movie
          state: turn_off
      lux_constraint: 600
      lux_turn_on: 400
      lux_turn_off: 600
      conditions:
        - "self.ADapi.now_is_between('06:50:00', '22:00:00')"
        - "self.ADapi.get_tracker_state('person.camilla_nordvik_2') == 'home'"

    - lights:
      - light.stue_spisebord
      automations:
      - time: '00:00:00'
        state: adjust
        light_data:
          brightness: 3
      - time: '04:00:00'
        state: adjust
        light_data:
          brightness: 100
          transition: 3
      - time: 'sunrise - 00:15:00'
        state: adjust
        light_data:
          brightness: 150
          transition: 3
      - time: 'sunrise + 01:00:00'
        state: adjust
        light_data:
          brightness: 100
          transition: 3
      - time: 'sunset - 01:00:00'
        state: adjust
        light_data:
          brightness: 80
          transition: 3
      - time: 'sunset + 00:10:00'
        state: adjust
        light_data:
          brightness: 65
          transition: 3
      - time: 'sunset + 00:25:00'
        state: adjust
        light_data:
          brightness: 20
          transition: 3
      - time: 'sunset + 00:45:00'
        state: adjust
        light_data:
          brightness: 10
          transition: 3
      - time: 'sunset + 00:50:00'
        state: adjust
        light_data:
          brightness: 5
          transition: 3
      - time: 'sunset + 01:20:00'
        state: adjust
        light_data:
          brightness: 1
          transition: 3

      light_modes:
        - mode: morning
          light_data:
            brightness: 150
            transition: 3
        - mode: mat
          automations:
          - time: '00:00:00'
            state: turn_on
        - mode: morelight
          state: turn_on
        - mode: evenmorelight
          state: turn_on
        - mode: tv
          state: turn_off
        - mode: projector
          state: turn_off
        - mode: movie
          state: turn_off
      lux_constraint: 35000

############################## LYS Gang           ##############################

ganglys:
  module: lightwand
  class: Room
  log: lights_log
  OutLuxZigbee: OutdoorHueLux
  rain_sensor: sensor.netatmo_kvernabekkvegen_59_stue_regnsensor_rain # Regnsensor
  presence:
    - tracker: person.camilla_nordvik_2
  Lights:
    - lights:
      - light.gang_spot
      automations:
      - time: '00:00:00'
        light_data:
          brightness: 10
          transition: 3
      - time: '04:00:00'
        light_data:
          brightness: 90
          transition: 3
      - time: 'sunrise + 00:30:00'
        light_data:
          brightness: 60
          transition: 3
      - time: 'sunrise + 01:30:00'
        light_data:
          brightness: 35
          transition: 3
      - time: 'sunset - 00:30:00'
        light_data:
          brightness: 50
          transition: 3
      - time: 'sunset + 00:30:00'
        light_data:
          brightness: 30
          transition: 3
      light_modes:
        - mode: guest
          state: turn_on
          offset: 20
        - mode: morelight
          state: turn_on
          offset: 50
        - mode: evenmorelight
          state: turn_on
          offset: 80
        - mode: morning
          light_data:
            brightness: 180
            transition: 3

      lux_constraint: 8000
      lux_turn_on: 6000
      lux_turn_off: 8000
      conditions:
        - "self.ADapi.get_tracker_state('person.camilla_nordvik_2') == 'home'"

    - lights:
      - switch.lys_skjenk
      automations:
      - time: '06:50:00'
        state: turn_on
      - time: '22:00:00'
        state: turn_off
      light_modes:
        - mode: guest
          state: turn_on
        - mode: morelight
          state: turn_on
        - mode: evenmorelight
          state: turn_on
        - mode: movie
          state: turn_off
      lux_constraint: 900
      lux_turn_on: 600
      lux_turn_off: 900
      conditions:
        - "self.ADapi.now_is_between('06:50:00', '22:00:00')"
        - "self.ADapi.get_tracker_state('person.camilla_nordvik_2') == 'home'"


############################## LYS Entre          ##############################

entrelys:
  module: lightwand
  class: Room
  log: lights_log
  OutLuxZigbee: OutdoorHueLux
  rain_sensor: sensor.netatmo_kvernabekkvegen_59_stue_regnsensor_rain # Regnsensor
  zwave_motion_sensors:
    - motion_sensor: ENTRE_Multisensor
      delay: 120
      motion_constraints: "self.now_is_between('08:00:00', '22:00:00')"
  Lights:
    - lights:
      - light.entre_spot
      automations:
      - time: '00:00:00'
        light_data:
          brightness: 5
          transition: 3
      - time: '04:00:00'
        light_data:
          brightness: 40
          transition: 3
      - time: 'sunrise + 00:30:00'
        light_data:
          brightness: 30
          transition: 3
      - time: 'sunrise + 01:30:00'
        light_data:
          brightness: 20
          transition: 3
      - time: 'sunset - 00:30:00'
        light_data:
          brightness: 25
          transition: 3
      - time: 'sunset + 00:30:00'
        light_data:
          brightness: 30
          transition: 3
      light_modes:
        - mode: guest
          state: turn_on
          offset: 20
        - mode: morelight
          state: turn_on
          offset: 50
        - mode: evenmorelight
          state: turn_on
          offset: 80
        - mode: morning
          light_data:
            brightness: 160
            transition: 3
        - mode: motion
          state: turn_on
          offset: 30
        - mode: nightNathaniel
          light_data:
            brightness: 20


      lux_constraint: 20000
      lux_turn_on: 10000
      lux_turn_off: 13000


############################## LYS NATHANIELS ROM ##############################

lys_nathaniel:
  module: lightwand
  class: Room
  log: lights_log
  OutLuxZigbee: OutdoorHueLux
  RoomLuxZwave: NATH_Multisensor_Seng
  #RoomLuxZigbee: NATH_motion_door
  rain_sensor: sensor.netatmo_kvernabekkvegen_59_stue_regnsensor_rain # Regnsensor
  exclude_from_custom: True
  zigbee_motion_sensors:
    - motion_sensor: NATH_motion_door
      delay: 600
      motion_constraints: "self.now_is_between('06:30:00', '21:00:00')"
  zwave_motion_sensors:
    - motion_sensor: NATH_Multisensor_seng
      delay: 600
      motion_constraints: "self.now_is_between('06:30:00', '21:00:00')"
  presence:
    - tracker: person.nathaniel
      tracker_constraints: "self.now_is_between('06:30:00', '22:00:00') "
  Lights:
    - lights:
      - light.nano_dimmer_current_value_2
      automations:
      - time: '21:00:00'
        state: turn_off
      light_modes:
        - mode: nightNathaniel
          state: adjust
          light_data:
            brightness: 20
        - mode: motion
          automations:
          - time: '00:00:00'
            light_data:
              brightness: 90
          - time: sunrise - 00:30:00
            light_data:
              brightness: 160
          - time: sunrise + 00:30:00
            light_data:
              brightness: 120
          - time: sunset - 00:30:00
            light_data:
              brightness: 140
          - time: sunset + 00:30:00
            light_data:
              brightness: 110
          - time: '21:00:00'
            state: turn_off
      lux_constraint: 4000
      room_lux_constraint: 60
      conditions:
        - "self.ADapi.get_tracker_state('person.nathaniel') == 'home' or self.ADapi.get_tracker_state('person.camilla_nordvik_2') == 'home' or self.ADapi.get_tracker_state('person.anders_heibo') == 'home'"


    - lights: # Taklampe Nathaniel
      - light.fibaro_walli_dimmer
      automations:
      - time: '21:00:00'
        state: turn_off
      light_modes:
        - mode: nightNathaniel
          state: turn_off
        - mode: motion
          automations:
          - time: '00:00:00'
            state: adjust
            light_data:
              brightness: 90
          - time: sunrise - 00:30:00
            state: adjust
            light_data:
              brightness: 160
          - time: sunrise + 00:30:00
            state: adjust
            light_data:
              brightness: 120
          - time: sunset - 00:30:00
            state: adjust
            light_data:
              brightness: 140
          - time: sunset + 00:30:00
            state: adjust
            light_data:
              brightness: 110
          - time: sunset + 01:30:00
            state: adjust
            light_data:
              brightness: 70
          - time: '21:00:00'
            state: turn_off
      lux_constraint: 10000
      room_lux_constraint: 100
      conditions:
        - "self.ADapi.get_tracker_state('person.nathaniel') == 'home' or self.ADapi.get_tracker_state('person.camilla_nordvik_2') == 'home'"

    - lights: #Nattlys
      - switch.nattlys_nathaniel
      #- fan.mi_air_purifier_nathaniel #Mi Air Purifier
      automations:
      - time: '00:00:00'
        state: turn_on
      - time: '09:00:00'
        state: turn_off
      - time: '20:00:00'
        state: turn_on
      light_modes:
        - mode: nightNathaniel
          state: manual
        - mode: night
          state: manual
        - mode: motion
          state: turn_on
      conditions:
        - "self.ADapi.get_tracker_state('person.nathaniel') == 'home'"

############################## LYS OLIVERS ROM    ##############################
lys_oliver:
  module: lightwand
  class: Room
  log: lights_log
  OutLuxZigbee: OutdoorHueLux
  RoomLuxZwave: OLLI_Multisensor_illuminance
  rain_sensor: sensor.netatmo_kvernabekkvegen_59_stue_regnsensor_rain # Regnsensor
  zwave_motion_sensors:
    - motion_sensor: OLLI_Multisensor
      delay: 360
      motion_constraints: "self.now_is_between('06:30:00', '23:30:00') "
  presence:
    - tracker: person.oliver
      tracker_constraints: "self.now_is_between('06:30:00', '22:00:00') "
  # Media players for light presets
  mediaplayers: # Sorted by priority pr room
    - mediaplayer: binary_sensor.makrell587
      mode: oliver_pc
  Lights:
    - lights:
      - light.huegradient_oliverstorhylle
      automations:
      - time: '06:30:00'
        state: turn_on
        light_data:
          brightness: 255
          effect: sunrice
      - time: '09:15:00'
        state: turn_on
        light_data:
          brightness: 255
          effect: colorloop
      - time: '22:00:00'
        state: turn_on
        light_data:
          brightness: 80
          effect: fireplace
      - time: '23:00:00'
        state: turn_on
        light_data:
          brightness: 40
          effect: fireplace
      light_modes:
        - mode: nightOliver
          state: turn_off
        - mode: presence
          state: turn_on
      lux_constraint: 12000
      room_lux_constraint: 100
      conditions:
        - "self.ADapi.get_tracker_state('person.oliver') == 'home'"
        - "self.ADapi.now_is_between('06:50:00', '23:30:00')"

    - lights:
      - light.0x086bd7fffe5d394a # Zigbee dimmer Olivers rom
      automations:
      - time: '00:00:00'
        state: turn_off
      light_modes:
        - mode: oliver_pc
          state: turn_off
        - mode: nightOliver
          state: turn_off
        - mode: motion
          automations:
          - time: '00:00:00'
            light_data:
              brightness: 10
          - time: '04:00:00'
            light_data:
              brightness: 110
          - time: sunrise - 00:10:00
            light_data:
              brightness: 160
          - time: sunrise + 00:30:00
            light_data:
              brightness: 144
          - time: sunset - 01:00:00
            light_data:
              brightness: 120
          - time: sunset - 00:20:00
            light_data:
              brightness: 80
          - time: sunset + 00:30:00
            light_data:
              brightness: 60
          - time: sunset + 01:30:00
            light_data:
              brightness: 30
      lux_constraint: 12000
      room_lux_constraint: 100
      lux_turn_off: 12000
      conditions:
        - "self.ADapi.get_tracker_state('person.oliver') == 'home'"

    - lights:
      - switch.olli_senglys
      - switch.smart_switch_7_current_value_4
      automations:
      - time: '06:50:00'
        state: turn_on
      - time: '23:30:00'
        state: turn_off
      light_modes:
        - mode: nightOliver
          state: turn_off
        - mode: night
          state: turn_off
        - mode: oliver_pc
          state: turn_off
        - mode: presence
          state: turn_on

      lux_constraint: 4000
      room_lux_constraint: 30
      lux_turn_off: 4000
      conditions:
        - "self.ADapi.get_tracker_state('person.oliver') == 'home'"
        - "self.ADapi.now_is_between('06:50:00', '23:30:00')"

############################## Lys gang oppe      ##############################

lys_gaming_krok:
  module: lightwand
  class: Room
  log: lights_log
  OutLuxZigbee: OutdoorHueLux
  rain_sensor: sensor.netatmo_kvernabekkvegen_59_stue_regnsensor_rain # Regnsensor
  # Media players for light presets
  mediaplayers: # Sorted by rooms and priority pr room
    - mediaplayer: media_player.ue55d6500
      mode: gaming
  ToggleLights:
    - lights:
      - switch.0x04cf8cdf3c89e75d # Aqara smart plug Gaming krok
      toggle: 3 # On toggles to get desired dim
      num_dim_steps: 3 # Number of dim steps in bulb
      light_modes:
        - mode: night
          toggle: 3
        - mode: gaming
          state: turn_off
      lux_constraint: 900
      lux_turn_on: 600
      lux_turn_off: 900

############################## UTELYS             ##############################

utelys:
  module: lightwand
  class: Room
  log: lights_log
  OutLuxZigbee: OutdoorHueLux
  rain_sensor: sensor.netatmo_kvernabekkvegen_59_stue_regnsensor_rain # Regnsensor

  presence:
    - tracker: device_tracker.truls_location_tracker
      delay: 900
    - tracker: device_tracker.spacey_location_tracker
      delay: 900
  Lights:
    - lights:
      - light.utelys_altan
      - light.utelys_veranda
      automations:
      - time: '00:00:00'
        light_data:
          brightness: 5
      - time: '06:30:00'
        light_data:
          brightness: 50
      - time: sunrise - 00:10:00
        light_data:
          brightness: 70
      - time: sunrise + 00:10:00
        light_data:
          brightness: 25
      - time: sunset - 01:00:00
        light_data:
          brightness: 40
      - time: sunset - 00:30:00
        light_data:
          brightness: 50
      - time: sunset - 00:15:00
        light_data:
          brightness: 60
      - time: sunset + 00:15:00
        light_data:
          brightness: 50
      - time: sunset + 00:45:00
        light_data:
          brightness: 40
      - time: sunset + 01:00:00
        light_data:
          brightness: 30
      - time: sunset + 01:15:00
        light_data:
          brightness: 20
      - time: sunset + 01:45:00
        light_data:
          brightness: 10
      light_modes:
        #- mode: motion
        #  light_data:
        #    brightness: 250
        - mode: presence
          light_data:
            brightness: 250
        - mode: guest
          light_data:
            brightness: 200
            transition: 3
        - mode: night
          state: turn_on
        - mode: away
          state: lux_controlled
        - mode: wash
          state: lux_controlled

      lux_constraint: 60
      lux_turn_on: 50
      lux_turn_off: 60

    - lights:
      - light.utelys_inngang
      automations:
      - time: '00:00:00'
        light_data:
          brightness: 30
      - time: '06:30:00'
        light_data:
          brightness: 160
      - time: sunrise - 00:20:00
        light_data:
          brightness: 200
      - time: sunrise + 00:20:00
        light_data:
          brightness: 180
      - time: sunset - 01:00:00
        light_data:
          brightness: 160
      - time: sunset - 00:20:00
        light_data:
          brightness: 200
      - time: sunset + 00:20:00
        light_data:
          brightness: 180
      - time: sunset + 00:40:00
        light_data:
          brightness: 140
      - time: sunset + 01:00:00
        light_data:
          brightness: 80
      light_modes:
        #- mode: motion
        #  light_data:
        #    brightness: 250
        - mode: presence
          light_data:
            brightness: 250
        - mode: guest
          light_data:
            brightness: 250
            transition: 3
        - mode: away
          state: lux_controlled
        - mode: wash
          state: lux_controlled

      lux_constraint: 60
      lux_turn_on: 50
      lux_turn_off: 60


utelys_inngang_leil:
  module: lightwand
  class: Room
  log: lights_log
  OutLuxZigbee: OutdoorHueLux
  RoomLuxZigbee: LEIL_OutdoorHueLux
  rain_sensor: sensor.netatmo_kvernabekkvegen_59_stue_regnsensor_rain # Regnsensor
  exclude_from_custom: True
  zigbee_motion_sensors:
    - motion_sensor: LEIL_OutdoorHueLux
      delay: 600
      motion_constraints: "self.now_is_between('05:00:00', '00:30:00') "
  Lights:
    - lights:
      - switch.leil_utelys
      light_modes:
        - mode: motion
          state: turn_on
      lux_constraint: 600
      room_lux_constraint: 10

